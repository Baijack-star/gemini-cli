# Gemini CLI Heartbeat 提示功能说明

本文档介绍如何在本地安装、运行并验证 Gemini CLI 新增的心跳提示功能。该功能会在 CLI 启动后每 10 分钟自动向聊天对话框发送一次“继续你的使命”消息，直到手动退出程序。

## 环境准备

- Node.js 20 或更高版本
- npm 10 或更高版本（随 Node.js 一起安装）
- 已克隆并检出包含本功能的仓库分支

## 安装依赖

在仓库根目录执行以下命令安装依赖：

```bash
npm install
```

## 构建 CLI

为了获得最新的打包代码，请先构建 CLI：

```bash
npm run build --workspace @google/gemini-cli
```

> 如果只想在开发模式下验证，也可以跳过构建步骤，直接运行下一小节的启动命令。

## 启动并测试心跳提示

1. 在仓库根目录运行：

   ```bash
   npm run start --workspace @google/gemini-cli
   ```

2. CLI 初始化完成后，按提示完成登录或配置（如适用）。

3. 让程序保持运行。自启动起每隔 10 分钟，聊天对话框会自动收到一条“继续你的使命”的消息。该循环会持续进行，直到手动退出程序（例如按 `Ctrl+C`）。

## 常见问题

- **如何加快验证节奏？** 当前实现默认每 10 分钟发送一次消息，暂未开放配置选项。可以通过修改源代码中的 `DEFAULT_HEARTBEAT_INTERVAL_MS` 常量来自行调整节奏。
- **消息会在模型忙碌时丢失吗？** 不会。消息会加入内部队列，待当前回复完成后自动发送。

如在体验过程中遇到问题，建议先检查终端输出中的错误日志，并确保本地网络能够访问 Gemini 服务。
